var S=Object.create;var{getPrototypeOf:O,defineProperty:V,getOwnPropertyNames:b}=Object;var C=Object.prototype.hasOwnProperty;var j=(F,B,G)=>{G=F!=null?S(O(F)):{};let J=B||!F||!F.__esModule?V(G,"default",{value:F,enumerable:!0}):G;for(let N of b(F))if(!C.call(J,N))V(J,N,{get:()=>F[N],enumerable:!0});return J};var U=(F,B)=>()=>(B||F((B={exports:{}}).exports,B),B.exports);var k=U((A,M)=>{/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */(function(F,B){if(typeof M==="object"&&M.exports)M.exports=B();else F.Toastify=B()})(A,function(F){var B=function(q){return new B.lib.init(q)},G="1.12.0";B.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3000,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},B.lib=B.prototype={toastify:G,constructor:B,init:function(q){if(!q)q={};if(this.options={},this.toastElement=null,this.options.text=q.text||B.defaults.text,this.options.node=q.node||B.defaults.node,this.options.duration=q.duration===0?0:q.duration||B.defaults.duration,this.options.selector=q.selector||B.defaults.selector,this.options.callback=q.callback||B.defaults.callback,this.options.destination=q.destination||B.defaults.destination,this.options.newWindow=q.newWindow||B.defaults.newWindow,this.options.close=q.close||B.defaults.close,this.options.gravity=q.gravity==="bottom"?"toastify-bottom":B.defaults.gravity,this.options.positionLeft=q.positionLeft||B.defaults.positionLeft,this.options.position=q.position||B.defaults.position,this.options.backgroundColor=q.backgroundColor||B.defaults.backgroundColor,this.options.avatar=q.avatar||B.defaults.avatar,this.options.className=q.className||B.defaults.className,this.options.stopOnFocus=q.stopOnFocus===void 0?B.defaults.stopOnFocus:q.stopOnFocus,this.options.onClick=q.onClick||B.defaults.onClick,this.options.offset=q.offset||B.defaults.offset,this.options.escapeMarkup=q.escapeMarkup!==void 0?q.escapeMarkup:B.defaults.escapeMarkup,this.options.ariaLive=q.ariaLive||B.defaults.ariaLive,this.options.style=q.style||B.defaults.style,q.backgroundColor)this.options.style.background=q.backgroundColor;return this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var q=document.createElement("div");if(q.className="toastify on "+this.options.className,this.options.position)q.className+=" toastify-"+this.options.position;else if(this.options.positionLeft===!0)q.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.");else q.className+=" toastify-right";if(q.className+=" "+this.options.gravity,this.options.backgroundColor)console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var K in this.options.style)q.style[K]=this.options.style[K];if(this.options.ariaLive)q.setAttribute("aria-live",this.options.ariaLive);if(this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)q.appendChild(this.options.node);else{if(this.options.escapeMarkup)q.innerText=this.options.text;else q.innerHTML=this.options.text;if(this.options.avatar!==""){var _=document.createElement("img");if(_.src=this.options.avatar,_.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0)q.appendChild(_);else q.insertAdjacentElement("afterbegin",_)}}if(this.options.close===!0){var Q=document.createElement("button");Q.type="button",Q.setAttribute("aria-label","Close"),Q.className="toast-close",Q.innerHTML="&#10006;",Q.addEventListener("click",function(H){H.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var P=window.innerWidth>0?window.innerWidth:screen.width;if((this.options.position=="left"||this.options.positionLeft===!0)&&P>360)q.insertAdjacentElement("afterbegin",Q);else q.appendChild(Q)}if(this.options.stopOnFocus&&this.options.duration>0){var Z=this;q.addEventListener("mouseover",function(H){window.clearTimeout(q.timeOutValue)}),q.addEventListener("mouseleave",function(){q.timeOutValue=window.setTimeout(function(){Z.removeElement(q)},Z.options.duration)})}if(typeof this.options.destination!=="undefined")q.addEventListener("click",function(H){if(H.stopPropagation(),this.options.newWindow===!0)window.open(this.options.destination,"_blank");else window.location=this.options.destination}.bind(this));if(typeof this.options.onClick==="function"&&typeof this.options.destination==="undefined")q.addEventListener("click",function(H){H.stopPropagation(),this.options.onClick()}.bind(this));if(typeof this.options.offset==="object"){var $=J("x",this.options),D=J("y",this.options),W=this.options.position=="left"?$:"-"+$,z=this.options.gravity=="toastify-top"?D:"-"+D;q.style.transform="translate("+W+","+z+")"}return q},showToast:function(){this.toastElement=this.buildToast();var q;if(typeof this.options.selector==="string")q=document.getElementById(this.options.selector);else if(this.options.selector instanceof HTMLElement||typeof ShadowRoot!=="undefined"&&this.options.selector instanceof ShadowRoot)q=this.options.selector;else q=document.body;if(!q)throw"Root element is not defined";var K=B.defaults.oldestFirst?q.firstChild:q.lastChild;if(q.insertBefore(this.toastElement,K),B.reposition(),this.options.duration>0)this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration);return this},hideToast:function(){if(this.toastElement.timeOutValue)clearTimeout(this.toastElement.timeOutValue);this.removeElement(this.toastElement)},removeElement:function(q){q.className=q.className.replace(" on",""),window.setTimeout(function(){if(this.options.node&&this.options.node.parentNode)this.options.node.parentNode.removeChild(this.options.node);if(q.parentNode)q.parentNode.removeChild(q);this.options.callback.call(q),B.reposition()}.bind(this),400)}},B.reposition=function(){var q={top:15,bottom:15},K={top:15,bottom:15},_={top:15,bottom:15},Q=document.getElementsByClassName("toastify"),P;for(var Z=0;Z<Q.length;Z++){if(N(Q[Z],"toastify-top")===!0)P="toastify-top";else P="toastify-bottom";var $=Q[Z].offsetHeight;P=P.substr(9,P.length-1);var D=15,W=window.innerWidth>0?window.innerWidth:screen.width;if(W<=360)Q[Z].style[P]=_[P]+"px",_[P]+=$+D;else if(N(Q[Z],"toastify-left")===!0)Q[Z].style[P]=q[P]+"px",q[P]+=$+D;else Q[Z].style[P]=K[P]+"px",K[P]+=$+D}return this};function J(q,K){if(K.offset[q])if(isNaN(K.offset[q]))return K.offset[q];else return K.offset[q]+"px";return"0px"}function N(q,K){if(!q||typeof K!=="string")return!1;else if(q.className&&q.className.trim().split(/\s+/gi).indexOf(K)>-1)return!0;else return!1}return B.lib.init.prototype=B.lib,B})});var I=(F,B)=>B.map((G)=>G/F*100);class X{canvas;ctx;dropZone;fileInput;previewLine;clearBtn;undoBtn;rulersList;imageInfo;currentImage=null;rulers=[];imageScale=1;imageOffsetX=0;imageOffsetY=0;displayedImageWidth=0;displayedImageHeight=0;constructor(){this.canvas=document.getElementById("imageCanvas"),this.ctx=this.canvas.getContext("2d"),this.dropZone=document.getElementById("dropZone"),this.fileInput=document.getElementById("fileInput"),this.previewLine=document.getElementById("previewLine"),this.clearBtn=document.getElementById("clearBtn"),this.undoBtn=document.getElementById("undoBtn"),this.rulersList=document.getElementById("rulersList"),this.imageInfo=document.getElementById("imageInfo"),this.initializeEventListeners()}initializeEventListeners(){this.dropZone.addEventListener("dragover",this.handleDragOver.bind(this)),this.dropZone.addEventListener("dragleave",this.handleDragLeave.bind(this)),this.dropZone.addEventListener("drop",this.handleDrop.bind(this)),this.dropZone.addEventListener("click",this.handleDropZoneClick.bind(this)),this.fileInput.addEventListener("change",this.handleFileSelect.bind(this)),document.addEventListener("paste",this.handlePaste.bind(this)),this.canvas.addEventListener("click",this.handleCanvasClick.bind(this)),this.canvas.addEventListener("mousemove",this.handleCanvasMouseMove.bind(this)),this.canvas.addEventListener("mouseleave",this.handleCanvasMouseLeave.bind(this)),this.clearBtn.addEventListener("click",this.clearRulers.bind(this)),this.undoBtn.addEventListener("click",this.undoLastRuler.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this)),window.addEventListener("resize",this.handleResize.bind(this))}handleDragOver(F){F.preventDefault(),this.dropZone.classList.add("drag-over")}handleDragLeave(F){F.preventDefault(),this.dropZone.classList.remove("drag-over")}handleDrop(F){F.preventDefault(),this.dropZone.classList.remove("drag-over");let B=F.dataTransfer?.files;if(B&&B.length>0)this.loadImageFile(B[0])}handleDropZoneClick(F){console.log("Drop zone clicked!"),F.preventDefault(),F.stopPropagation(),console.log("Triggering file input..."),this.fileInput.click()}handleFileSelect(F){console.log("File input changed!");let B=F.target,G=B.files;if(console.log("Selected files:",G),G&&G.length>0)console.log("Loading file:",G[0].name),this.loadImageFile(G[0]),B.value=""}handlePaste(F){let B=F.clipboardData?.items;if(!B)return;for(let G of Array.from(B))if(G.type.startsWith("image/")){let J=G.getAsFile();if(J){this.loadImageFile(J);break}}}handleCanvasClick(F){if(!this.currentImage)return;let B=this.canvas.getBoundingClientRect(),G=F.clientX-B.left,N=(F.clientY-B.top-this.imageOffsetY)/this.imageScale;if(N>=0&&N<=this.currentImage.naturalHeight)this.addRuler(N)}handleCanvasMouseMove(F){if(!this.currentImage)return;let B=this.canvas.getBoundingClientRect(),G=F.clientY-B.top,J=(G-this.imageOffsetY)/this.imageScale;if(J>=0&&J<=this.currentImage.naturalHeight)this.previewLine.style.display="block",this.previewLine.style.top=`${G}px`;else this.previewLine.style.display="none"}handleCanvasMouseLeave(){this.previewLine.style.display="none"}handleKeyDown(F){if(F.key==="Escape")this.clearRulers();else if((F.ctrlKey||F.metaKey)&&F.key==="z")F.preventDefault(),this.undoLastRuler()}handleResize(){if(this.currentImage)this.drawImage()}loadImageFile(F){if(!F.type.startsWith("image/")){alert("Please select a valid image file.");return}let B=new FileReader;B.onload=(G)=>{let J=new Image;J.onload=()=>{this.currentImage=J,this.clearRulers(),this.drawImage(),this.updateImageInfo(),this.showCanvas()},J.src=G.target?.result},B.readAsDataURL(F)}showCanvas(){this.dropZone.style.display="none",this.canvas.style.display="block"}drawImage(){if(!this.currentImage)return;let B=this.canvas.parentElement.getBoundingClientRect().width-40,G=window.innerHeight-250,J=B/this.currentImage.naturalWidth,N=G/this.currentImage.naturalHeight,q=0.5,K=2;this.imageScale=Math.max(q,Math.min(J,N,K)),this.displayedImageWidth=this.currentImage.naturalWidth*this.imageScale,this.displayedImageHeight=this.currentImage.naturalHeight*this.imageScale,this.canvas.width=this.displayedImageWidth,this.canvas.height=this.displayedImageHeight,this.imageOffsetX=0,this.imageOffsetY=0,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.currentImage,0,0,this.displayedImageWidth,this.displayedImageHeight),this.drawRulers()}addRuler(F){if(F=Math.round(F),this.rulers.find((K)=>Math.abs(K.y-F)<3))return;let G=this.rulers.length>0?this.rulers[this.rulers.length-1].y:0,J=F-G,N=I(this.currentImage.naturalHeight,[J])[0],q={y:F,height:J,percentage:N};this.rulers.push(q),this.updateRulersList(),this.updateButtonStates(),this.drawRulers()}drawRulers(){if(!this.currentImage)return;this.canvas.parentElement.querySelectorAll(".ruler-line, .ruler-label").forEach((B)=>B.remove()),this.rulers.forEach((B,G)=>{let J=B.y*this.imageScale+this.imageOffsetY,N=document.createElement("div");N.className="ruler-line placed",N.style.top=`${J}px`,this.canvas.parentElement.appendChild(N);let q=document.createElement("div");q.className="ruler-label",q.style.top=`${J-15}px`,q.style.left=`${this.displayedImageWidth+10}px`,q.innerHTML=`y: <span class="ruler-y">${B.y}px</span> — h: <span class="ruler-height">${B.height}px</span> — <span class="ruler-percentage">${B.percentage.toFixed(3)}%</span>`,this.canvas.parentElement.appendChild(q)})}updateRulersList(){if(this.rulers.length===0){this.rulersList.innerHTML='<p class="no-rulers">No rulers placed yet</p>';return}let F="";this.rulers.forEach((B,G)=>{F+=`
        <div class="ruler-item">
          <div class="ruler-index">Ruler ${G+1}</div>
          <div class="ruler-details">
            y: <span class="ruler-y">${B.y}px</span> h: <span class="ruler-height">${B.height}px</span> %: <span data-copyable class="ruler-percentage">${B.percentage/100}</span>
          </div>
        </div>
      `}),this.rulersList.innerHTML=F}updateImageInfo(){if(!this.currentImage){this.imageInfo.innerHTML="<p>No image loaded</p>";return}this.imageInfo.innerHTML=`
      <div><span class="info-label">Original Size:</span><span class="info-value">${this.currentImage.naturalWidth} × ${this.currentImage.naturalHeight}px</span></div>
      <div><span class="info-label">Displayed Size:</span><span class="info-value">${Math.round(this.displayedImageWidth)} × ${Math.round(this.displayedImageHeight)}px</span></div>
      <div><span class="info-label">Scale Factor:</span><span class="info-value">${(this.imageScale*100).toFixed(1)}%</span></div>
      <div><span class="info-label">Rulers:</span><span class="info-value">${this.rulers.length}</span></div>
    `}updateButtonStates(){this.clearBtn.disabled=this.rulers.length===0,this.undoBtn.disabled=this.rulers.length===0,this.updateImageInfo()}clearRulers(){this.rulers=[],this.updateRulersList(),this.updateButtonStates(),this.drawRulers()}undoLastRuler(){if(this.rulers.length>0)this.rulers.pop(),this.updateRulersList(),this.updateButtonStates(),this.drawRulers()}}var R=j(k(),1);class L{constructor(){this.init()}init(){document.addEventListener("click",(F)=>{let G=F.target.closest("[data-copyable]");if(G)navigator.clipboard.writeText(G.textContent||""),R.default({text:"Copied to clipboard",duration:5000,gravity:"bottom",position:"right",style:{background:"var(--a6d189)",color:"var(--surface1)"}}).showToast()})}}var w=j(k(),1);document.addEventListener("DOMContentLoaded",()=>{new X,new L,w.default({text:"Welcome to the Image Ruler",duration:5000,gravity:"bottom",position:"right",style:{background:"var(--rosewater)",color:"var(--surface1)"}}).showToast()});

//# debugId=DB6DA0D7B1F35DC664756E2164756E21
//# sourceMappingURL=index.js.map
